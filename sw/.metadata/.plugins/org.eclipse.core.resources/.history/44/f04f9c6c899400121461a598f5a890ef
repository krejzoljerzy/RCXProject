package com.BGHK.RCX.CompileAndLink;

import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;

public class CompileAndLink {
	
	String commands="arm-none-eabi-gcc" +
			" -mcpu=cortex-m0 -mthumb -Wall -ffunction-sections -g -O0" +
			" -c -ID:\gitHub\RCXProject\fw\legoRCX\cmsis_core" +
			" -ID:\gitHub\RCXProject\fw\legoRCX\cmsis_boot" +
			" -ID:\gitHub\RCXProject\fw\legoRCX\stm_lib\inc" +
			" -ID:\gitHub\RCXProject\fw -ID:\gitHub\RCXProject\fw\legoRCX" +
			" -ID:\gitHub\RCXProject\fw\legoRCX\stm_lib" +
			" D:\gitHub\RCXProject\fw\legoRCX\stm_lib\src\stm32f0xx_rcc.c" +
			" D:\gitHub\RCXProject\fw\legoRCX\main.c" +
			" D:\gitHub\RCXProject\fw\legoRCX\cmsis_boot\startup\startup_stm32f0xx.s" +
			" D:\gitHub\RCXProject\fw\legoRCX\stm_lib\src\stm32f0xx_gpio.c" +
			" D:\gitHub\RCXProject\fw\legoRCX\stm_lib\src\stm32f0xx_usart.c" +
			" D:\gitHub\RCXProject\fw\legoRCX\cmsis_boot\system_stm32f0xx.c" +
			" D:\gitHub\RCXProject\fw\legoRCX\stm_lib\src\stm32f0xx_pwr.c" +
			" D:\gitHub\RCXProject\fw\legoRCX\cmsis_core\core_cm0.c
;

	public static void compileAndLink() {

		try {
			// Execute command
			Runtime.getRuntime().exec("cmd /c start compilerCommand.bat ");

		} catch (IOException e) {
		}

	}

	public static void createBatFile() throws IOException {

		// Create new bat file.
		File f;
		f = new File("compilerCommand.bat");
		if (!f.exists()) {
			f.delete();
		}
		f.createNewFile();

		try {
			// Write to file
			FileWriter fstream = new FileWriter("compilerCommand.bat");
			BufferedWriter out = new BufferedWriter(fstream);
			out.write("cd c:");
			// Close the output stream
			out.close();
		} catch (Exception e) {// Catch exception if any
			System.err.println("Error: " + e.getMessage());
		}

	}

	public static void main(String[] args) throws IOException {

		createBatFile();
		compileAndLink();

	}

}
